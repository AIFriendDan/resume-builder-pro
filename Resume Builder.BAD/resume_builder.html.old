<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Resume Builder Pro - Full Version</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <style>
        @media print {
            body * { visibility: hidden; }
            #resume-preview, #resume-preview * { visibility: visible; }
            #resume-preview { position: absolute; left: 0; top: 0; }
        }
        @keyframes spin { to { transform: rotate(360deg); } }
        .animate-spin { animation: spin 1s linear infinite; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const { useState, useEffect } = React;

        function ResumeBuilder() {
            // Default data
            const defaultData = {
                header: { name: "Your Name", title: "Professional Title", location: "City, State", phone: "123-456-7890", email: "email@example.com", linkedin: "linkedin.com/in/profile" },
                summary: "Professional with extensive experience...",
                skills: ["Skill 1", "Skill 2", "Skill 3", "Skill 4"],
                experience: [{
                    id: 1,
                    company: "Company",
                    title: "Job Title",
                    startDate: "Month Year",
                    endDate: "Present",
                    bullets: ["Achievement 1", "Achievement 2"]
                }],
                education: [{
                    id: 1,
                    degree: "Degree Name",
                    institution: "University",
                    startDate: "Year",
                    endDate: "Year"
                }],
                certifications: []
            };

            const [resumeData, setResumeData] = useState(() => {
                try {
                    return JSON.parse(localStorage.getItem('resume-data')) || defaultData;
                } catch { return defaultData; }
            });

            const [apiKey, setApiKey] = useState(() => localStorage.getItem('anthropic-api-key') || '');
            const [showApiKeyModal, setShowApiKeyModal] = useState(false);
            const [editMode, setEditMode] = useState(true);
            const [enhancingBullet, setEnhancingBullet] = useState(null);
            const [showJobTailor, setShowJobTailor] = useState(false);
            const [jobDescription, setJobDescription] = useState('');
            const [tailoringResults, setTailoringResults] = useState(null);
            const [analyzingJob, setAnalyzingJob] = useState(false);
            const [showATSChecker, setShowATSChecker] = useState(false);
            const [showImport, setShowImport] = useState(false);
            const [importText, setImportText] = useState('');
            const [analyzingImport, setAnalyzingImport] = useState(false);
            const [importResults, setImportResults] = useState(null);
            const [showVersions, setShowVersions] = useState(false);
            const [versions, setVersions] = useState(() => {
                try {
                    return JSON.parse(localStorage.getItem('versions')) || [];
                } catch { return []; }
            });

            useEffect(() => {
                localStorage.setItem('resume-data', JSON.stringify(resumeData));
            }, [resumeData]);

            useEffect(() => {
                if (apiKey) {
                    localStorage.setItem('anthropic-api-key', apiKey);
                }
            }, [apiKey]);

            const callAI = async (prompt) => {
                if (!apiKey) {
                    alert('Please set your Anthropic API key first!');
                    setShowApiKeyModal(true);
                    return null;
                }

                try {
                    const response = await fetch('https://api.anthropic.com/v1/messages', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'x-api-key': apiKey,
                            'anthropic-version': '2023-06-01'
                        },
                        body: JSON.stringify({
                            model: 'claude-sonnet-4-20250514',
                            max_tokens: 2000,
                            messages: [{ role: 'user', content: prompt }]
                        })
                    });

                    if (!response.ok) {
                        throw new Error('API call failed');
                    }

                    const data = await response.json();
                    return data.content.find(c => c.type === 'text')?.text || '';
                } catch (error) {
                    alert('AI request failed. Check your API key and try again.');
                    return null;
                }
            };

            const enhanceBullet = async (expId, bulletIdx) => {
                const exp = resumeData.experience.find(e => e.id === expId);
                if (!exp) return;

                setEnhancingBullet(`${expId}-${bulletIdx}`);
                const result = await callAI(`Enhance this resume bullet using STAR method. Keep under 150 chars. Return ONLY the enhanced bullet, no explanation:\n\n${exp.bullets[bulletIdx]}\n\nContext: ${exp.title} at ${exp.company}`);
                
                if (result) {
                    const newData = {...resumeData};
                    newData.experience.find(e => e.id === expId).bullets[bulletIdx] = result.trim();
                    setResumeData(newData);
                }
                setEnhancingBullet(null);
            };

            const analyzeJob = async () => {
                if (!jobDescription.trim()) {
                    alert('Please paste a job description first');
                    return;
                }

                setAnalyzingJob(true);
                const result = await callAI(`Analyze this job and my resume. Return ONLY JSON with this structure:
{
  "matchScore": "X%",
  "skillsToHighlight": ["skill1", "skill2"],
  "missingSkills": ["skill1", "skill2"],
  "suggestedSummaryChanges": "text",
  "bulletPointFocus": ["focus1", "focus2"],
  "keywordsToAdd": ["keyword1", "keyword2"]
}

JOB DESCRIPTION:
${jobDescription}

MY RESUME:
Summary: ${resumeData.summary}
Skills: ${resumeData.skills.join(', ')}
Experience: ${resumeData.experience.map(e => `${e.title} at ${e.company}: ${e.bullets.join('; ')}`).join('\n')}`);

                if (result) {
                    try {
                        const cleaned = result.replace(/```json\n?/g, '').replace(/```\n?/g, '').trim();
                        setTailoringResults(JSON.parse(cleaned));
                    } catch {
                        alert('Failed to parse AI response');
                    }
                }
                setAnalyzingJob(false);
            };

            const analyzeImport = async () => {
                if (!importText.trim()) {
                    alert('Please paste resume text first');
                    return;
                }

                setAnalyzingImport(true);
                const result = await callAI(`Extract resume data. Return ONLY JSON:
{
  "title": "job title",
  "summary": "summary",
  "skills": ["skill1", "skill2"],
  "experience": [{"company": "name", "title": "title", "startDate": "date", "endDate": "date", "bullets": ["bullet1"]}]
}

RESUME TEXT:
${importText}`);

                if (result) {
                    try {
                        const cleaned = result.replace(/```json\n?/g, '').replace(/```\n?/g, '').trim();
                        setImportResults(JSON.parse(cleaned));
                    } catch {
                        alert('Failed to parse resume data');
                    }
                }
                setAnalyzingImport(false);
            };

            const applyImport = () => {
                if (!importResults) return;
                const newData = {...resumeData};
                if (importResults.title) newData.header.title = importResults.title;
                if (importResults.summary) newData.summary = importResults.summary;
                if (importResults.skills) newData.skills = importResults.skills;
                if (importResults.experience) {
                    newData.experience = importResults.experience.map((e, i) => ({
                        id: Date.now() + i,
                        company: e.company || "Company",
                        title: e.title || "Title",
                        startDate: e.startDate || "Date",
                        endDate: e.endDate || "Date",
                        bullets: e.bullets || []
                    }));
                }
                setResumeData(newData);
                setShowImport(false);
                setImportText('');
                setImportResults(null);
                alert('‚úÖ Resume updated!');
            };

            const calculateATSScore = () => {
                let score = 0;
                const checks = [];
                
                if (resumeData.header.phone) { score += 10; checks.push({ label: 'Phone present', passed: true }); } 
                else { checks.push({ label: 'Phone present', passed: false }); }
                
                if (resumeData.header.email) { score += 10; checks.push({ label: 'Email present', passed: true }); }
                else { checks.push({ label: 'Email present', passed: false }); }
                
                if (resumeData.header.location) { score += 10; checks.push({ label: 'Location present', passed: true }); }
                else { checks.push({ label: 'Location present', passed: false }); }
                
                if (resumeData.summary.length >= 200 && resumeData.summary.length <= 500) { score += 15; checks.push({ label: 'Summary length optimal (200-500)', passed: true }); }
                else { checks.push({ label: 'Summary length optimal (200-500)', passed: false }); }
                
                if (resumeData.skills.length >= 8) { score += 15; checks.push({ label: 'Sufficient skills (8+)', passed: true }); }
                else { checks.push({ label: 'Sufficient skills (8+)', passed: false }); }
                
                const hasMetrics = resumeData.experience.some(e => e.bullets.some(b => /\d+%|\d+\+/.test(b)));
                if (hasMetrics) { score += 15; checks.push({ label: 'Contains metrics', passed: true }); }
                else { checks.push({ label: 'Contains metrics', passed: false }); }
                
                const hasActionVerbs = resumeData.experience.some(e => e.bullets.some(b => /led|managed|created|developed|improved/.test(b.toLowerCase())));
                if (hasActionVerbs) { score += 10; checks.push({ label: 'Uses action verbs', passed: true }); }
                else { checks.push({ label: 'Uses action verbs', passed: false }); }
                
                if (resumeData.education.length > 0) { score += 10; checks.push({ label: 'Education present', passed: true }); }
                else { checks.push({ label: 'Education present', passed: false }); }
                
                if (resumeData.experience.length >= 2 && resumeData.experience.length <= 4) { score += 5; checks.push({ label: 'Appropriate length (2-4 roles)', passed: true }); }
                else { checks.push({ label: 'Appropriate length (2-4 roles)', passed: false }); }
                
                return { score, checks };
            };

            const updateHeader = (field, value) => {
                setResumeData(prev => ({...prev, header: {...prev.header, [field]: value}}));
            };

            const addSkill = () => {
                setResumeData(prev => ({...prev, skills: [...prev.skills, "New Skill"]}));
            };

            const updateSkill = (idx, value) => {
                setResumeData(prev => ({...prev, skills: prev.skills.map((s, i) => i === idx ? value : s)}));
            };

            const deleteSkill = (idx) => {
                setResumeData(prev => ({...prev, skills: prev.skills.filter((_, i) => i !== idx)}));
            };

            const addExperience = () => {
                setResumeData(prev => ({...prev, experience: [...prev.experience, {
                    id: Date.now(),
                    company: "Company",
                    title: "Title",
                    startDate: "Month Year",
                    endDate: "Present",
                    bullets: ["Achievement"]
                }]}));
            };

            const updateExp = (id, field, value) => {
                setResumeData(prev => ({...prev, experience: prev.experience.map(e => e.id === id ? {...e, [field]: value} : e)}));
            };

            const deleteExp = (id) => {
                setResumeData(prev => ({...prev, experience: prev.experience.filter(e => e.id !== id)}));
            };

            const addBullet = (expId) => {
                setResumeData(prev => ({...prev, experience: prev.experience.map(e => e.id === expId ? {...e, bullets: [...e.bullets, "New bullet"]} : e)}));
            };

            const updateBullet = (expId, idx, value) => {
                setResumeData(prev => ({...prev, experience: prev.experience.map(e => e.id === expId ? {...e, bullets: e.bullets.map((b, i) => i === idx ? value : b)} : e)}));
            };

            const deleteBullet = (expId, idx) => {
                setResumeData(prev => ({...prev, experience: prev.experience.map(e => e.id === expId ? {...e, bullets: e.bullets.filter((_, i) => i !== idx)} : e)}));
            };

            const saveVersion = () => {
                const name = prompt('Version name:');
                if (!name) return;
                const newVersions = [...versions, { id: Date.now(), name, data: resumeData, timestamp: new Date().toISOString() }];
                setVersions(newVersions);
                localStorage.setItem('versions', JSON.stringify(newVersions));
                alert('‚úÖ Saved!');
            };

            const loadVersion = (id) => {
                const v = versions.find(v => v.id === id);
                if (v && confirm('Load this version?')) {
                    setResumeData(v.data);
                    setShowVersions(false);
                }
            };

            const deleteVersion = (id) => {
                if (confirm('Delete?')) {
                    const newVersions = versions.filter(v => v.id !== id);
                    setVersions(newVersions);
                    localStorage.setItem('versions', JSON.stringify(newVersions));
                }
            };

            const exportWord = () => {
                const html = `<html><head><meta charset='utf-8'><style>body{font-family:Calibri,Arial;font-size:11pt;}</style></head><body>${document.getElementById('resume-preview').innerHTML}</body></html>`;
                const blob = new Blob(['\ufeff', html], {type: 'application/msword'});
                const url = URL.createObjectURL(blob);
                const link = document.createElement('a');
                link.href = url;
                link.download = `${resumeData.header.name.replace(/\s+/g, '_')}_Resume.doc`;
                link.click();
                URL.revokeObjectURL(url);
            };

            return (
                <div className="min-h-screen bg-gray-50">
                    {/* Header */}
                    <div className="bg-gradient-to-r from-blue-600 to-purple-600 text-white p-4">
                        <div className="max-w-7xl mx-auto flex justify-between items-center flex-wrap gap-2">
                            <h1 className="text-2xl font-bold">AI Resume Builder Pro</h1>
                            <div className="flex gap-2 flex-wrap">
                                <button onClick={() => setShowApiKeyModal(true)} className="bg-yellow-500 text-black px-3 py-2 rounded text-sm font-semibold">
                                    üîë API Key
                                </button>
                                <button onClick={() => setEditMode(!editMode)} className="bg-white text-purple-600 px-3 py-2 rounded text-sm font-semibold">
                                    {editMode ? 'üëÅÔ∏è Preview' : '‚úèÔ∏è Edit'}
                                </button>
                                <button onClick={() => setShowVersions(true)} className="bg-white bg-opacity-20 px-3 py-2 rounded text-sm">
                                    üìÇ Versions
                                </button>
                                <button onClick={() => setShowJobTailor(true)} className="bg-white bg-opacity-20 px-3 py-2 rounded text-sm">
                                    üéØ Job Tailor
                                </button>
                                <button onClick={() => setShowATSChecker(true)} className="bg-white bg-opacity-20 px-3 py-2 rounded text-sm">
                                    ‚úÖ ATS Score
                                </button>
                                <button onClick={() => setShowImport(true)} className="bg-white bg-opacity-20 px-3 py-2 rounded text-sm">
                                    üì• Import
                                </button>
                                <button onClick={exportWord} className="bg-green-600 px-3 py-2 rounded text-sm font-semibold">
                                    üíæ Export
                                </button>
                            </div>
                        </div>
                    </div>

                    {/* API Key Modal */}
                    {showApiKeyModal && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                            <div className="bg-white rounded-lg max-w-md w-full p-6">
                                <h2 className="text-2xl font-bold mb-4">Anthropic API Key</h2>
                                <p className="text-sm text-gray-600 mb-4">
                                    Get your API key from <a href="https://console.anthropic.com" target="_blank" className="text-blue-600 underline">console.anthropic.com</a>
                                </p>
                                <input
                                    type="password"
                                    value={apiKey}
                                    onChange={(e) => setApiKey(e.target.value)}
                                    placeholder="sk-ant-..."
                                    className="w-full px-4 py-2 border rounded mb-4"
                                />
                                <div className="flex gap-2">
                                    <button onClick={() => setShowApiKeyModal(false)} className="flex-1 bg-blue-600 text-white px-4 py-2 rounded">
                                        Save
                                    </button>
                                    <button onClick={() => {setApiKey(''); setShowApiKeyModal(false);}} className="px-4 py-2 bg-gray-200 rounded">
                                        Clear
                                    </button>
                                </div>
                            </div>
                        </div>
                    )}

                    {/* Job Tailor Modal */}
                    {showJobTailor && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-auto">
                            <div className="bg-white rounded-lg max-w-4xl w-full my-8 max-h-[90vh] overflow-auto">
                                <div className="p-6">
                                    <div className="flex justify-between mb-4">
                                        <h2 className="text-2xl font-bold">Job Tailoring Assistant</h2>
                                        <button onClick={() => setShowJobTailor(false)} className="text-2xl">√ó</button>
                                    </div>
                                    <textarea
                                        value={jobDescription}
                                        onChange={(e) => setJobDescription(e.target.value)}
                                        placeholder="Paste job description here..."
                                        className="w-full px-4 py-3 border rounded h-48 mb-4"
                                    />
                                    {!tailoringResults ? (
                                        <button
                                            onClick={analyzeJob}
                                            disabled={analyzingJob}
                                            className="w-full bg-blue-600 text-white px-4 py-3 rounded disabled:bg-gray-400"
                                        >
                                            {analyzingJob ? '‚è≥ Analyzing...' : '‚ú® Analyze Job'}
                                        </button>
                                    ) : (
                                        <div className="space-y-4">
                                            <div className="bg-blue-50 border border-blue-200 rounded p-4">
                                                <h3 className="font-bold text-lg">Match Score: {tailoringResults.matchScore}</h3>
                                            </div>
                                            <div className="bg-green-50 border border-green-200 rounded p-4">
                                                <h3 className="font-bold mb-2">‚úÖ Skills to Highlight</h3>
                                                <div className="flex flex-wrap gap-2">
                                                    {tailoringResults.skillsToHighlight.map((s, i) => (
                                                        <span key={i} className="bg-green-200 px-3 py-1 rounded-full text-sm">{s}</span>
                                                    ))}
                                                </div>
                                            </div>
                                            {tailoringResults.missingSkills.length > 0 && (
                                                <div className="bg-yellow-50 border border-yellow-200 rounded p-4">
                                                    <h3 className="font-bold mb-2">‚ö†Ô∏è Missing Skills</h3>
                                                    <div className="flex flex-wrap gap-2">
                                                        {tailoringResults.missingSkills.map((s, i) => (
                                                            <span key={i} className="bg-yellow-200 px-3 py-1 rounded-full text-sm">{s}</span>
                                                        ))}
                                                    </div>
                                                </div>
                                            )}
                                            <div className="bg-blue-50 border border-blue-200 rounded p-4">
                                                <h3 className="font-bold mb-2">üí° Summary Suggestions</h3>
                                                <p className="text-sm">{tailoringResults.suggestedSummaryChanges}</p>
                                            </div>
                                            <button onClick={() => {setTailoringResults(null); setJobDescription('');}} className="w-full bg-gray-500 text-white px-4 py-3 rounded">
                                                Analyze Another
                                            </button>
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>
                    )}

                    {/* ATS Checker Modal */}
                    {showATSChecker && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                            <div className="bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-auto p-6">
                                <div className="flex justify-between mb-4">
                                    <h2 className="text-2xl font-bold">ATS Score</h2>
                                    <button onClick={() => setShowATSChecker(false)} className="text-2xl">√ó</button>
                                </div>
                                {(() => {
                                    const {score, checks} = calculateATSScore();
                                    return (
                                        <>
                                            <div className="mb-6">
                                                <div className="flex justify-between mb-2">
                                                    <span className="font-bold">Overall Score</span>
                                                    <span className={`text-3xl font-bold ${score >= 80 ? 'text-green-600' : score >= 60 ? 'text-yellow-600' : 'text-red-600'}`}>
                                                        {score}%
                                                    </span>
                                                </div>
                                                <div className="w-full bg-gray-200 rounded-full h-4">
                                                    <div className={`h-4 rounded-full ${score >= 80 ? 'bg-green-600' : score >= 60 ? 'bg-yellow-600' : 'bg-red-600'}`} style={{width: `${score}%`}}/>
                                                </div>
                                            </div>
                                            <div className="space-y-2">
                                                {checks.map((c, i) => (
                                                    <div key={i} className="flex items-center gap-3 p-3 bg-gray-50 rounded">
                                                        <span className="text-xl">{c.passed ? '‚úÖ' : '‚ùå'}</span>
                                                        <span className="text-sm">{c.label}</span>
                                                    </div>
                                                ))}
                                            </div>
                                        </>
                                    );
                                })()}
                            </div>
                        </div>
                    )}

                    {/* Import Modal */}
                    {showImport && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                            <div className="bg-white rounded-lg max-w-3xl w-full max-h-[90vh] overflow-auto p-6">
                                <div className="flex justify-between mb-4">
                                    <h2 className="text-2xl font-bold">Import Resume</h2>
                                    <button onClick={() => {setShowImport(false); setImportText(''); setImportResults(null);}} className="text-2xl">√ó</button>
                                </div>
                                <textarea
                                    value={importText}
                                    onChange={(e) => setImportText(e.target.value)}
                                    placeholder="Paste your resume text here..."
                                    className="w-full px-4 py-3 border rounded h-64 mb-4"
                                />
                                {!importResults ? (
                                    <button
                                        onClick={analyzeImport}
                                        disabled={analyzingImport}
                                        className="w-full bg-blue-600 text-white px-4 py-3 rounded disabled:bg-gray-400"
                                    >
                                        {analyzingImport ? '‚è≥ Analyzing...' : '‚ú® Analyze Resume'}
                                    </button>
                                ) : (
                                    <div className="space-y-4">
                                        <div className="bg-green-50 border border-green-200 rounded p-4">
                                            <h3 className="font-bold mb-2">‚úÖ Resume Analyzed!</h3>
                                            <p className="text-sm"><strong>Title:</strong> {importResults.title}</p>
                                            <p className="text-sm"><strong>Skills:</strong> {importResults.skills?.length || 0}</p>
                                            <p className="text-sm"><strong>Experience:</strong> {importResults.experience?.length || 0} roles</p>
                                        </div>
                                        <div className="flex gap-3">
                                            <button onClick={applyImport} className="flex-1 bg-green-600 text-white px-4 py-3 rounded font-bold">
                                                ‚úì Apply Updates
                                            </button>
                                            <button onClick={() => {setImportResults(null); setImportText('');}} className="flex-1 bg-gray-500 text-white px-4 py-3 rounded">
                                                Cancel
                                            </button>
                                        </div>
                                    </div>
                                )}
                            </div>
                        </div>
                    )}

                    {/* Versions Modal */}
                    {showVersions && (
                        <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                            <div className="bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-auto p-6">
                                <div className="flex justify-between mb-4">
                                    <h2 className="text-2xl font-bold">Versions</h2>
                                    <button onClick={() => setShowVersions(false)} className="text-2xl">√ó</button>
                                </div>
                                <button onClick={saveVersion} className="w-full bg-blue-600 text-white px-4 py-3 rounded mb-4">
                                    üíæ Save Current Version
                                </button>
                                {versions.length === 0 ? (
                                    <p className="text-gray-500 text-center py-8">No versions yet</p>
                                ) : (
                                    <div className="space-y-3">
                                        {versions.map(v => (
                                            <div key={v.id} className="border rounded p-4 hover:bg-gray-50">
                                                <div className="flex justify-between items-start">
                                                    <div>
                                                        <h3 className="font-bold">{v.name}</h3>
                                                        <p className="text-sm text-gray-500">{new Date(v.timestamp).toLocaleString()}</p>
                                                    </div>
                                                    <div className="flex gap-2">
                                                        <button onClick={() => loadVersion(v.id)} className="bg-green-600 text-white px-3 py-1 rounded text-sm">Load</button>
                                                        <button onClick={() => deleteVersion(v.id)} className="bg-red-600 text-white px-3 py-1 rounded text-sm">Delete</button>
                                                    </div>
                                                </div>
                                            </div>
                                        ))}
                                    </div>
                                )}
                            </div>
                        </div>
                    )}

                    {/* Main Content */}
                    <div className="max-w-7xl mx-auto p-4">
                        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            {/* Editor */}
                            <div className="space-y-4">
                                <div className="bg-white rounded shadow p-6">
                                    <h2 className="font-bold mb-4">Header</h2>
                                    {editMode ? (
                                        <div className="space-y-2">
                                            <input value={resumeData.header.name} onChange={(e) => updateHeader('name', e.target.value)} className="w-full px-3 py-2 border rounded" placeholder="Name"/>
                                            <input value={resumeData.header.title} onChange={(e) => updateHeader('title', e.target.value)} className="w-full px-3 py-2 border rounded" placeholder="Title"/>
                                            <input value={resumeData.header.email} onChange={(e) => updateHeader('email', e.target.value)} className="w-full px-3 py-2 border rounded" placeholder="Email"/>
                                            <input value={resumeData.header.phone} onChange={(e) => updateHeader('phone', e.target.value)} className="w-full px-3 py-2 border rounded" placeholder="Phone"/>
                                        </div>
                                    ) : (
                                        <div className="text-sm"><p className="font-semibold">{resumeData.header.name}</p><p>{resumeData.header.title}</p></div>
                                    )}
                                </div>

                                <div className="bg-white rounded shadow p-6">
                                    <h2 className="font-bold mb-4">Summary</h2>
                                    {editMode ? (
                                        <textarea value={resumeData.summary} onChange={(e) => setResumeData({...resumeData, summary: e.target.value})} className="w-full px-3 py-2 border rounded h-24"/>
                                    ) : (
                                        <p className="text-sm">{resumeData.summary}</p>
                                    )}
                                </div>

                                <div className="bg-white rounded shadow p-6">
                                    <div className="flex justify-between mb-4">
                                        <h2 className="font-bold">Skills</h2>
                                        {editMode && <button onClick={addSkill} className="text-2xl text-blue-600">+</button>}
                                    </div>
                                    {resumeData.skills.map((skill, idx) => (
                                        <div key={idx} className="flex gap-2 mb-2">
                                            {editMode ? (
                                                <>
                                                    <input value={skill} onChange={(e) => updateSkill(idx, e.target.value)} className="flex-1 px-3 py-2 border rounded text-sm"/>
                                                    <button onClick={() => deleteSkill(idx)} className="text-red-500">üóëÔ∏è</button>
                                                </>
                                            ) : (
                                                <div className="text-sm">‚Ä¢ {skill}</div>
                                            )}
                                        </div>
                                    ))}
                                </div>

                                <div className="bg-white rounded shadow p-6">
                                    <div className="flex justify-between mb-4">
                                        <h2 className="font-bold">Experience</h2>
                                        {editMode && <button onClick={addExperience} className="text-2xl text-blue-600">+</button>}
                                    </div>
                                    {resumeData.experience.map(exp => (
                                        <div key={exp.id} className="border rounded p-4 mb-4">
                                            {editMode ? (
                                                <div className="space-y-2">
                                                    <div className="flex justify-between">
                                                        <h3 className="font-semibold">{exp.company}</h3>
                                                        <button onClick={() => deleteExp(exp.id)} className="text-red-500">üóëÔ∏è</button>
                                                    </div>
                                                    <input value={exp.company} onChange={(e) => updateExp(exp.id, 'company', e.target.value)} className="w-full px-3 py-2 border rounded text-sm" placeholder="Company"/>
                                                    <input value={exp.title} onChange={(e) => updateExp(exp.id, 'title', e.target.value)} className="w-full px-3 py-2 border rounded text-sm" placeholder="Title"/>
                                                    <div className="grid grid-cols-2 gap-2">
                                                        <input value={exp.startDate} onChange={(e) => updateExp(exp.id, 'startDate', e.target.value)} className="px-3 py-2 border rounded text-sm" placeholder="Start"/>
                                                        <input value={exp.endDate} onChange={(e) => updateExp(exp.id, 'endDate', e.target.value)} className="px-3 py-2 border rounded text-sm" placeholder="End"/>
                                                    </div>
                                                    {exp.bullets.map((bullet, bidx) => (
                                                        <div key={bidx} className="space-y-2">
                                                            <div className="flex gap-2">
                                                                <textarea value={bullet} onChange={(e) => updateBullet(exp.id, bidx, e.target.value)} className="flex-1 px-3 py-2 border rounded text-sm" rows="2"/>
                                                                <button onClick={() => deleteBullet(exp.id, bidx)} className="text-red-500">üóëÔ∏è</button>
                                                            </div>
                                                            <button
                                                                onClick={() => enhanceBullet(exp.id, bidx)}
                                                                disabled={enhancingBullet === `${exp.id}-${bidx}`}
                                                                className="text-xs bg-purple-100 hover:bg-purple-200 text-purple-700 px-3 py-1 rounded disabled:opacity-50"
                                                            >
                                                                {enhancingBullet === `${exp.id}-${bidx}` ? '‚è≥ Enhancing...' : '‚ú® AI Enhance'}
                                                            </button>
                                                        </div>
                                                    ))}
                                                    <button onClick={() => addBullet(exp.id)} className="text-sm text-blue-600">+ Add Bullet</button>
                                                </div>
                                            ) : (
                                                <div className="text-sm">
                                                    <p className="font-bold">{exp.company}</p>
                                                    <p className="italic">{exp.title}</p>
                                                    <p className="text-gray-600">{exp.startDate} - {exp.endDate}</p>
                                                    <ul className="mt-2 ml-4">
                                                        {exp.bullets.map((b, i) => <li key={i}>‚Ä¢ {b}</li>)}
                                                    </ul>
                                                </div>
                                            )}
                                        </div>
                                    ))}
                                </div>
                            </div>

                            {/* Preview */}
                            <div>
                                <div className="bg-gray-200 p-2 rounded-t text-center text-sm font-semibold">üìÑ Live Preview</div>
                                <div id="resume-preview" className="bg-white p-8 shadow" style={{minHeight: '11in'}}>
                                    <div className="text-center border-b-2 border-blue-900 pb-4 mb-4">
                                        <h1 className="text-3xl font-bold text-blue-900 mb-1">{resumeData.header.name}</h1>
                                        <h2 className="text-lg text-gray-700 mb-2">{resumeData.header.title}</h2>
                                        <p className="text-sm text-gray-600">
                                            {resumeData.header.location} | {resumeData.header.phone} | {resumeData.header.email}<br/>
                                            {resumeData.header.linkedin}
                                        </p>
                                    </div>

                                    <div className="mb-4">
                                        <h3 className="text-sm font-bold text-blue-900 uppercase border-b border-gray-300 pb-1 mb-2">Professional Summary</h3>
                                        <p className="text-sm text-justify leading-relaxed">{resumeData.summary}</p>
                                    </div>

                                    <div className="mb-4">
                                        <h3 className="text-sm font-bold text-blue-900 uppercase border-b border-gray-300 pb-1 mb-2">Core Competencies</h3>
                                        <div className="grid grid-cols-2 gap-x-4 gap-y-1">
                                            {resumeData.skills.map((skill, idx) => (
                                                <div key={idx} className="text-sm">‚Ä¢ {skill}</div>
                                            ))}
                                        </div>
                                    </div>

                                    <div className="mb-4">
                                        <h3 className="text-sm font-bold text-blue-900 uppercase border-b border-gray-300 pb-1 mb-2">Professional Experience</h3>
                                        {resumeData.experience.map(exp => (
                                            <div key={exp.id} className="mb-3">
                                                <div className="flex justify-between items-baseline mb-1">
                                                    <span className="font-bold text-sm">{exp.company}</span>
                                                    <span className="text-xs italic text-gray-600">{exp.startDate} ‚Äì {exp.endDate}</span>
                                                </div>
                                                <div className="italic text-sm text-gray-700 mb-1">{exp.title}</div>
                                                <ul className="ml-4">
                                                    {exp.bullets.map((bullet, idx) => (
                                                        <li key={idx} className="text-sm mb-1">‚óè {bullet}</li>
                                                    ))}
                                                </ul>
                                            </div>
                                        ))}
                                    </div>

                                    <div className="mb-4">
                                        <h3 className="text-sm font-bold text-blue-900 uppercase border-b border-gray-300 pb-1 mb-2">Education</h3>
                                        {resumeData.education.map(edu => (
                                            <div key={edu.id} className="text-sm mb-1">
                                                <span className="font-bold">{edu.degree}</span> ‚Ä¢ <span className="italic">{edu.institution}</span> ‚Ä¢ {edu.startDate} ‚Äì {edu.endDate}
                                            </div>
                                        ))}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<ResumeBuilder />);
    </script>
</body>
</html>